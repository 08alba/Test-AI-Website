<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rönnes Filmklubb - Rekommendationer</title>
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- All custom CSS is now inside this style tag -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Darker background for a cinema feel */
        }

        .card {
            background-color: #2c2c2c;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(to right, #e11d48, #be123c);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(225, 29, 72, 0.4);
        }

        .btn-primary:disabled {
            background: #4a4a4a;
            cursor: not-allowed;
        }

         .btn-secondary {
            background-color: #4a4a4a;
            border: 1px solid #6a6a6a;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #5a5a5a;
            transform: scale(1.05);
        }

        .poster-fallback {
            background-color: #333;
            color: #888;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
    </style>
</head>
<body class="text-white">

    <!-- Header Section -->
    <header class="py-8">
        <div class="container mx-auto px-4 flex flex-col items-center text-center">
            <!-- The 'src' for this image is set by JavaScript to prevent caching issues -->
            <img id="klubb-logo" src="logga.jpg" alt="Rönnes Filmklubb Logga" class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full shadow-lg mb-4">
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-rose-500">Rönnes Filmklubb</h1>
            <p class="text-lg md:text-xl text-gray-300 mt-2">Dina personliga filmrekommendationer.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="text-center mb-12 flex flex-wrap justify-center items-center gap-4">
            <button id="recommendation-btn" class="btn-primary text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg">
                Ge mig nya rekommendationer
            </button>
            <a id="download-btn" href="#" download="ronnes-filmklubb.html" class="btn-secondary text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg">
                Ladda ner sidan
            </a>
        </div>

        <!-- Movie Recommendations Container -->
        <div id="recommendations-container" class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12 max-w-4xl mx-auto">
            <!-- Movie cards will be inserted here by JavaScript -->
        </div>

         <!-- Poster Section -->
        <section class="mt-20 py-12 bg-gray-900/50 rounded-2xl">
            <div class="container mx-auto px-4 flex flex-col md:flex-row items-center justify-center text-center md:text-left gap-8">
                 <!-- The 'src' for this image is set by JavaScript to prevent caching issues -->
                <img id="klubb-poster" src="" alt="Filmklubb Poster" class="w-48 md:w-64 object-cover rounded-lg shadow-2xl">
                <div>
                    <h2 class="text-3xl font-bold text-rose-400">Gå med i klubben!</h2>
                    <p class="text-gray-300 mt-2 max-w-md">Trött på att inte kunna hitta en ny film att se? Gå med för att få filmrekommendationer om vad du kan se!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 mt-12">
        <p class="text-gray-500">&copy; 2025 Rönnes Filmklubb. Skapad med glädje.</p>
    </footer>

    <script>
        // All movie data is stored in this array of objects
        const movies = [
            // List 1
            { title: "Everything Everywhere All at Once", watchLink: "https://www.cineasterna.com/sv/library/148/title/4500", imdbLink: "https://www.imdb.com/title/tt6710474/", poster: "https://m.media-amazon.com/images/M/MV5BYTdiOTIyZTQtNmQ1OS00NjZlLWIyMTgtYzk5Y2M3ZDVmMDk1XkEyXkFqcGdeQXVyMTAzMDg4NzU0._V1_SX300.jpg", rating: "8.0/10", description: "En uttråkad kvinna sveps med i ett galet äventyr, där hon är den enda som kan rädda världen genom att utforska andra universum." },
            { title: "Guds Stad (City of God)", watchLink: "https://www.cineasterna.com/sv/library/148/title/4460", imdbLink: "http://www.imdb.com/title/tt0317248/", poster: "https://m.media-amazon.com/images/M/MV5BOTMwYjc5ZmItYTFjZC00ZGQ3LTlkNTMtMjZiNTZlMWQzNzI5XkEyXkFqcGdeQXVyNzU1NzE3NTg@._V1_SX300.jpg", rating: "8.6/10", description: "En skildring av den organiserade brottslighetens uppväxt i en av Rio de Janeiros förorter, från 60-talet till början av 80-talet." },
            { title: "Oldboy - Hämnden", watchLink: "https://www.cineasterna.com/sv/library/148/title/3492", imdbLink: "http://www.imdb.com/title/tt0364569/", poster: "https://m.media-amazon.com/images/M/MV5BMTI3NTQyMzU5M15BMl5BanBnXkFtZTcwMTM2MjgyMQ@@._V1_SX300.jpg", rating: "8.4/10", description: "Efter att ha varit kidnappad och fängslad i femton år släpps en man fri, bara för att upptäcka att han måste hitta sin fångvaktare inom fem dagar." },
            { title: "Pans Labyrint", watchLink: "https://www.cineasterna.com/sv/library/148/title/3016", imdbLink: "http://www.imdb.com/title/tt0457430/", poster: "https://m.media-amazon.com/images/M/MV5BYzFjMThiMDItOWRlMC00MDI4LWI5YTgtODgyNGU4NjM0MGFmXkEyXkFqcGdeQXVyMTAwMzM3NDI3._V1_SX300.jpg", rating: "8.2/10", description: "I det falangistiska Spanien 1944 flyr en drömmande ung flicka sin sadistiska styvfar och den omgivande verklighetens brutalitet in i en kuslig men fängslande fantasivärld." },
            { title: "Parasit", watchLink: "https://www.cineasterna.com/sv/library/148/title/2909", imdbLink: "http://www.imdb.com/title/tt6751668/", poster: "https://m.media-amazon.com/images/M/MV5BYWZjMjk3ZTItODQ2ZC00NTY5LWE0ZDYtZTI3MjcwN2Q5NTVkXkEyXkFqcGdeQXVyODk4OTc3MTY@._V1_SX300.jpg", rating: "8.5/10", description: "Girighet och klassdiskriminering hotar den nybildade symbiotiska relationen mellan den rika familjen Park och den fattiga familjen Kim." },
            { title: "The Gentlemen", watchLink: "https://www.cineasterna.com/sv/library/148/title/3082", imdbLink: "http://www.imdb.com/title/tt8367814/", poster: "https://m.media-amazon.com/images/M/MV5BMTlkMmVmYjktYTc2NC00ZGJiLWIyMWMtNzFhMDUzMDc5ZGRkXkEyXkFqcGdeQXVyNTI4MzE4MDU@._V1_SX300.jpg", rating: "7.8/10", description: "En amerikansk expatrierad knarkkung i England försöker sälja sitt mycket lönsamma marijuanaimperium, vilket utlöser intriger, mutor och utpressning." },
            { title: "John Wick", watchLink: "https://www.cineasterna.com/sv/library/148/title/2589", imdbLink: "http://www.imdb.com/title/tt2911666/", poster: "https://m.media-amazon.com/images/M/MV5BMTU2NjA1ODgzMF5BMl5BanBnXkFtZTgwMTM2MTI4MjE@._V1_SX300.jpg", rating: "7.4/10", description: "En före detta yrkesmördare tvingas tillbaka in i den kriminella undre världen han övergivit, efter att maffioser tagit allt ifrån honom." },
            { title: "Train to Busan", watchLink: "https://www.cineasterna.com/sv/library/148/title/916", imdbLink: "http://www.imdb.com/title/tt5700672/", poster: "https://m.media-amazon.com/images/M/MV5BMTkwOTQ4OTg0OV5BMl5BanBnXkFtZTgwMzQyOTM0OTE@._V1_SX300.jpg", rating: "7.6/10", description: "Medan en zombie-epidemi bryter ut i Sydkorea, kämpar passagerarna på ett tåg från Seoul till Busan för att överleva." },

            // List 2
            { title: "Star Wars: Episode IV - A New Hope", watchLink: "https://www.disneyplus.com/", imdbLink: "https://www.imdb.com/title/tt0076759/", poster: "https://m.media-amazon.com/images/M/MV5BOTA5NjhiOTAtZWM0ZC00MWNhLThiMzEtZDFkOTk2OTU1ZDJkXkEyXkFqcGdeQXVyMTA4NDI1NTQx._V1_SX300.jpg", rating: "8.6/10", description: "Luke Skywalker ansluter sig till en jediriddare, en kaxig pilot, en wookiee och två droider för att rädda galaxen från Imperiets världsdestruktiva vapen." },
            { title: "Harry Potter and the Philosopher's Stone", watchLink: "https://www.hbomax.com/", imdbLink: "https://www.imdb.com/title/tt0241527/", poster: "https://m.media-amazon.com/images/M/MV5BNmQ0ODBhMjUtNDRhOC00MGQzLTk5MTAtZDliODg5YjU5MjE4XkEyXkFqcGdeQXVyNDUyOTg3Njg@._V1_SX300.jpg", rating: "7.6/10", description: "En föräldralös pojke får veta på sin elfte födelsedag att han är den föräldralösa sonen till två mäktiga trollkarlar och besitter unika magiska krafter." },
            { title: "Interstellar", watchLink: "https://www.hbomax.com/", imdbLink: "https://www.imdb.com/title/tt0816692/", poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg", rating: "8.7/10", description: "Ett team av upptäcktsresande reser genom ett maskhål i rymden i ett försök att säkerställa mänsklighetens överlevnad." },
            { title: "The Dark Knight", watchLink: "https://www.hbomax.com/", imdbLink: "https://www.imdb.com/title/tt0468569/", poster: "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg", rating: "9.0/10", description: "När hotet känt som Jokern skapar förödelse och kaos bland folket i Gotham, måste Batman acceptera en av de största psykologiska och fysiska testerna." },
            { title: "The Lord of the Rings: The Fellowship of the Ring", watchLink: "https://www.hbomax.com/", imdbLink: "https://www.imdb.com/title/tt0120737/", poster: "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_SX300.jpg", rating: "8.8/10", description: "En timid hobbit från Fylke och åtta följeslagare ger sig ut på en resa för att förstöra den mäktiga Härskarringen och rädda Midgård från den mörke lorden Sauron." },
            { title: "Schindler's List", watchLink: "https://www.skyshowtime.com/", imdbLink: "https://www.imdb.com/title/tt0108052/", poster: "https://m.media-amazon.com/images/M/MV5BNDE4OTMxMTctNmRhYy00NWE2LTg3YzItYTk3M2UwOTU5Njg4XkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg", rating: "9.0/10", description: "I det tysk-ockuperade Polen under andra världskriget blir industrialisten Oskar Schindler gradvis oroad för sin judiska arbetskraft efter att ha bevittnat deras förföljelse." },
            { title: "Shutter Island", watchLink: "https://www.skyshowtime.com/", imdbLink: "https://www.imdb.com/title/tt1130884/", poster: "https://m.media-amazon.com/images/M/MV5BYzhiNDkyNzktNTZmYS00ZTBkLTk2MDAtM2U0YjU1MzgxZjgzXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg", rating: "8.2/10", description: "År 1954 undersöker en U.S. Marshal försvinnandet av en mördare som rymt från ett sjukhus för kriminellt sinnessjuka." }
        ];

        // Get references to the HTML elements we need to interact with
        const recommendationsContainer = document.getElementById('recommendations-container');
        const recommendationBtn = document.getElementById('recommendation-btn');

        /**
         * Selects two random movies, creates HTML cards for them, and displays them on the page.
         */
        function generateRecommendations() {
            // Clear any previous movie cards
            recommendationsContainer.innerHTML = '';
            
            // Shuffle the movies array randomly and pick the first two
            const shuffled = [...movies].sort(() => 0.5 - Math.random());
            const selectedMovies = shuffled.slice(0, 2);

            // Create and append a card for each selected movie
            selectedMovies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'card rounded-2xl overflow-hidden shadow-2xl flex flex-col p-6';
                
                // Use a template literal to build the card's HTML content
                card.innerHTML = `
                    <div class="relative w-full aspect-[2/3] mb-6">
                         <img src="${movie.poster}" alt="Poster för ${movie.title}" class="w-full h-full object-cover rounded-lg" onerror="this.onerror=null; this.parentElement.innerHTML = '<div class=&quot;w-full h-full poster-fallback rounded-lg p-4&quot;>Poster saknas för<br><strong>${ movie.title.replace(/'/g, "\\'") }</strong></div>';">
                    </div>
                    <div class="flex-grow flex flex-col">
                        <h2 class="text-2xl font-bold mb-2 text-gray-100">${movie.title}</h2>
                        <div class="flex items-center mb-4 text-yellow-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>
                            <span class="font-semibold">${movie.rating}</span>
                        </div>
                        <p class="text-gray-400 mb-6 flex-grow">${movie.description}</p>
                        <div class="mt-auto grid grid-cols-2 gap-4">
                            <a href="${movie.watchLink}" target="_blank" rel="noopener noreferrer" class="btn-primary text-white font-semibold py-2 px-4 rounded-lg text-center transition-transform hover:scale-105 block">Titta här</a>
                            <a href="${movie.imdbLink}" target="_blank" rel="noopener noreferrer" class="btn-secondary text-white font-semibold py-2 px-4 rounded-lg text-center transition-transform hover:scale-105 block">IMDb</a>
                        </div>
                    </div>
                `;
                recommendationsContainer.appendChild(card);
            });
        }

        // Add a click event listener to the button
        recommendationBtn.addEventListener('click', generateRecommendations);

        // This runs when the page has finished loading
        document.addEventListener('DOMContentLoaded', () => {
            // This is the cache-busting solution. It adds a unique timestamp to the image URLs.
            // This tricks the browser into thinking it's a new image and forces it to reload.
            const timestamp = new Date().getTime();
            const logoEl = document.getElementById('klubb-logo');
            const posterEl = document.getElementById('klubb-poster');

            if (logoEl) {
                logoEl.src = `https://storage.googleapis.com/maker-studio-tools-us-east1/user/Logga.jpg-24c351f3-68cc-4621-aa88-e865e116e58f?t=${timestamp}`;
            }
            if (posterEl) {
                posterEl.src = `https://storage.googleapis.com/maker-studio-tools-us-east1/user/Poster_Filmklubb.jpg-ff8f2936-58fe-420b-a877-c1acc02318fc?t=${timestamp}`;
            }

            // Set up the download button functionality
            const downloadBtn = document.getElementById('download-btn');
            downloadBtn.addEventListener('click', () => {
                try {
                    const pageHTML = document.documentElement.outerHTML;
                    const blob = new Blob([pageHTML], { type: 'text/html' });
                    downloadBtn.href = URL.createObjectURL(blob);
                } catch (e) {
                    console.error("Download failed:", e);
                    // Fallback for older browsers or if createObjectURL fails
                    alert("Could not create a download file. Please try saving the page manually (Ctrl+S).");
                }
            });

            // Generate the first set of movie recommendations
            generateRecommendations();
        });
    </script>
</body>
</html>

